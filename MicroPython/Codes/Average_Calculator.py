from machine import Pin
import time
import neopixel

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ (GPIO 24) –∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ WS2812 (GPIO 23)
button = Pin(24, Pin.IN, Pin.PULL_UP)
num_leds = 1
np = neopixel.NeoPixel(Pin(23), num_leds)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤
def show_color(color):
    for i in range(num_leds):
        np[i] = color
    np.write()

# –§—É–Ω–∫—Ü–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
def explain_average():
    print("–û–ü–†–ï–î–ï–õ–ï–ù–ò–ï: –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π.")
    print("–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–µ: \n")
    print("  –°—Ä–µ–¥–Ω–µ–µ = (–°—É–º–º–∞ –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π) / (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π)")
    print("–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤—ã—á–∏—Å–ª–∏–º —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –Ω–∞–±–æ—Ä–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.")
    print("–î–ª—è —ç—Ç–æ–≥–æ –≤–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π.")

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def get_measurements():
    while True:
        try:
            num_measurements = int(input("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π (–æ—Ç 1 –¥–æ 10): "))
            if num_measurements < 1 or num_measurements > 10:
                print("‚ùå –û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π –æ—Ç 1 –¥–æ 10!")
                continue
            break
        except ValueError:
            print("‚ùå –û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!")

    measurements = []
    for i in range(num_measurements):
        while True:
            try:
                measurement = float(input(f"–í–≤–µ–¥–∏—Ç–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ {i+1}: "))
                measurements.append(measurement)
                break
            except ValueError:
                print("‚ùå –û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!")

    return measurements

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
def calculate_average(measurements):
    total = sum(measurements)
    average = total / len(measurements)
    return average

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π
def check_answer():
    try:
        while True:
            explain_average()  # –û–±—ä—è—Å–Ω—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            measurements = get_measurements()  # –ü–æ–ª—É—á–∞–µ–º –∏–∑–º–µ—Ä–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

            # –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            average = calculate_average(measurements)
            print(f"\n–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤–∞—à–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π: {average:.2f}")
            print("–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º —Å—Ä–∞–≤–Ω–∏—Ç—å –≤–∞—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º!")

            print("–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞...")
            while button.value():  # –ñ–¥—ë–º –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
                time.sleep(0.1)

            # –ü–æ—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            print(f"‚ÑπÔ∏è –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ: (–°—É–º–º–∞ –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π) / (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ—Ä–µ–Ω–∏–π).")
            print(f"‚ÑπÔ∏è –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤–∞—à–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è: {measurements}, —Ç–æ (–°—É–º–º–∞: {sum(measurements)}) / (–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {len(measurements)}) = {average:.2f}.")

            if average:
                show_color((0, 255, 0))  # –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
                print("‚úÖ –í—Å–µ –≤–µ—Ä–Ω–æ! –í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—á–∏—Å–ª–∏–ª–∏ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ!")
            else:
                show_color((255, 0, 0))  # –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
                print(f"‚ùå –û—à–∏–±–∫–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: {average:.2f}")

            time.sleep(1)  # –î–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            show_color((0, 0, 0))  # –í—ã–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã
            print("\n–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—Å—á–µ—Ç...\n")

    except KeyboardInterrupt:
        print("\nüö™ –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
        show_color((0, 0, 0))  # –í—ã–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º

# –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
check_answer()  # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
