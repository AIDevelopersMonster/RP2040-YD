from machine import Pin
import neopixel
import time
import random

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ (GPIO 24) –∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ WS2812 (GPIO 23)
button = Pin(24, Pin.IN, Pin.PULL_UP)
num_leds = 1
np = neopixel.NeoPixel(Pin(23), num_leds)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤
def show_color(color):
    for i in range(num_leds):
        np[i] = color
    np.write()

# –§—É–Ω–∫—Ü–∏—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —É–º–Ω–æ–∂–µ–Ω–∏—è –∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
def explain_multiplication():
    print("                                        ")
    print(" \U0001F4A1 –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï:                        ")
    print("\u250C" + "\u2500" * 38 + "\u2510")
    print("‚îÇ –£–º–Ω–æ–∂–µ–Ω–∏–µ ‚Äî —ç—Ç–æ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è       ‚îÇ")
    print("‚îÇ –æ–ø–µ—Ä–∞—Ü–∏—è, –æ–∑–Ω–∞—á–∞—é—â–∞—è —Å–ª–æ–∂–µ–Ω–∏–µ —á–∏—Å–ª–∞  ‚îÇ")
    print("‚îÇ —Å–∞–º–æ–≥–æ —Å —Å–æ–±–æ–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.        ‚îÇ")
    print("‚îÇ –ù–∞–ø—Ä–∏–º–µ—Ä:                            ‚îÇ")
    print("‚îÇ                                      ‚îÇ")
    print("‚îÇ  3 √ó 2 = 3 + 3 = 6                   ‚îÇ")
    print("‚îÇ                                      ‚îÇ")
    print("‚îÇ üîπ –ß–∏—Å–ª–æ 1 ‚Äî –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç.    ‚îÇ")
    print("‚îÇ –ü—Ä–∏ —É–º–Ω–æ–∂–µ–Ω–∏–∏ –Ω–∞ –Ω–µ–≥–æ —á–∏—Å–ª–æ          ‚îÇ")
    print("‚îÇ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è:                       ‚îÇ")
    print("‚îÇ  7 √ó 1 = 7                           ‚îÇ")
    print("\u2514" + "\u2500" * 38 + "\u2518\n")
    print("–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º —É–º–Ω–æ–∂–∏—Ç—å –¥–≤–∞ —á–∏—Å–ª–∞!\n")

# –§—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ—Ä–∞
def generate_problem():
    a = random.randint(1, 9)  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
    b = 1  # –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ —É–º–Ω–æ–∂–µ–Ω–∏–∏
    correct_answer = a * b
    return a, b, correct_answer

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å –∫–Ω–æ–ø–∫–æ–π
def check_answer():
    try:
        while True:
            a, b, correct_answer = generate_problem()
            print(f"\n–†–µ—à–∏—Ç–µ –ø—Ä–∏–º–µ—Ä: {a} √ó {b} = ?")

            try:
                user_answer = int(input("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –æ—Ç–≤–µ—Ç: "))
            except ValueError:
                print("‚ùå –û—à–∏–±–∫–∞: –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!")
                continue

            print("–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞...")

            while button.value():  # –ñ–¥—ë–º –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
                time.sleep(0.1)

            if user_answer == correct_answer:
                print("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!")
                show_color((0, 255, 0))  # –ó–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞! –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: {correct_answer}")
                show_color((255, 0, 0))  # –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç

            if b == 1:
                print(f"‚ÑπÔ∏è {a} √ó {b} = {correct_answer}, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–∏ —É–º–Ω–æ–∂–µ–Ω–∏–∏ –Ω–∞ 1 —á–∏—Å–ª–æ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Ç–∫ 1 –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç. ")

            time.sleep(1)  # –î–∞–µ–º –≤—Ä–µ–º—è –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            show_color((0, 0, 0))  # –í—ã–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã
            print("\n–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä...\n")
    
    except KeyboardInterrupt:
        print("\nüö™ –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –î–æ —Å–≤–∏–¥–∞–Ω–∏—è!")
        show_color((0, 0, 0))  # –í—ã–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º

# –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
explain_multiplication()  # –û–±—ä—è—Å–Ω—è–µ–º —É–º–Ω–æ–∂–µ–Ω–∏–µ
check_answer()  # –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
